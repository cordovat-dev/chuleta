if no repos in config file, do an old-style update
for every repo in config file
	cd into repo
	if current branch is not master, then fail
	if master branch is not clean, then fail
	get the list of changes (only A and D) between since last save point (commit hash in config file)
	convert the list into a script of DMLs with an explicit transaction
	run DML script
	
	
git diff-tree --name-status -r HEAD~1..HEAD	


now we have to deal with duplicating paths in db
commit name or date?
